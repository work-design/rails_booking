<% @settings.except(:defaultDate).each do |key, value| %>
<% if value.is_a?(Hash) %>
calendar.setOption('<%= key %>', <%= raw value.to_json %>)
<% elsif value.is_a?(String) %>
calendar.setOption('<%= key %>', '<%= value %>')
<% else %>
calendar.setOption('<%= key %>', <%= value %>)
<% end %>
<% end %>
calendar.changeView('timeGrid', '<%= @settings[:defaultDate] %>')
calendar.removeAllEvents()
calendar.addEventSource(<%= raw @time_plan.events.to_json %>)

var tbody = document.getElementById('time_plan_tbody')
tbody.querySelectorAll('tr').forEach(function(el){
  el.classList.remove('active')
})

document.getElementById('time_plan_<%= @time_plan.id %>').classList = 'active';
